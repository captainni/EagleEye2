import{d as M,m as U,s as g,i as C,f as x,w as i,r as d,o as N,e,a as O,b as f}from"./index-095c05da.js";const F=M({__name:"RequirementForm",props:{initialData:{type:Object,default:null},isEdit:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["submit"],setup(c,{emit:_}){const a=c,y=_,u=U(),t=g({title:"",priority:"MEDIUM",status:"NEW",planTime:void 0,background:"",description:""}),v=g({title:[{required:!0,message:"请输入需求标题",trigger:"blur"}],priority:[{required:!0,message:"请选择优先级",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]});C(()=>a.initialData,o=>{o&&a.isEdit&&Object.assign(t,{id:o.id,title:o.title,priority:o.priorityLevel,status:o.status,planTime:o.planTime?o.planTime.split("T")[0]+"T00:00:00":void 0,background:o.background||"",description:o.description||""})},{immediate:!0});const V=async()=>{u.value&&await u.value.validate(o=>{if(o){const l={...t};a.isEdit&&!l.id&&a.initialData&&(l.id=a.initialData.id),y("submit",l)}else console.log("表单校验失败!")})},T=()=>{u.value&&(u.value.resetFields(),a.isEdit&&a.initialData?Object.assign(t,{id:a.initialData.id,title:a.initialData.title,priority:a.initialData.priorityLevel,status:a.initialData.status,planTime:a.initialData.planTime?a.initialData.planTime.split("T")[0]+"T00:00:00":void 0,background:a.initialData.background||"",description:a.initialData.description||""}):Object.assign(t,{title:"",priority:"MEDIUM",status:"NEW",planTime:void 0,background:"",description:""}))};return(o,l)=>{const p=d("el-input"),n=d("el-form-item"),s=d("el-option"),b=d("el-select"),k=d("el-date-picker"),m=d("el-button"),E=d("el-upload"),D=d("el-form");return N(),x(D,{ref_key:"requirementFormRef",ref:u,model:t,rules:v,"label-width":"100px",class:"p-4 border border-gray-200 rounded-lg bg-white"},{default:i(()=>[e(n,{label:"需求标题",prop:"title"},{default:i(()=>[e(p,{modelValue:t.title,"onUpdate:modelValue":l[0]||(l[0]=r=>t.title=r),placeholder:"请输入需求标题"},null,8,["modelValue"])]),_:1}),e(n,{label:"优先级",prop:"priority"},{default:i(()=>[e(b,{modelValue:t.priority,"onUpdate:modelValue":l[1]||(l[1]=r=>t.priority=r),placeholder:"请选择优先级"},{default:i(()=>[e(s,{label:"高",value:"HIGH"}),e(s,{label:"中",value:"MEDIUM"}),e(s,{label:"低",value:"LOW"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"状态",prop:"status"},{default:i(()=>[e(b,{modelValue:t.status,"onUpdate:modelValue":l[2]||(l[2]=r=>t.status=r),placeholder:"请选择状态"},{default:i(()=>[e(s,{label:"新建",value:"NEW"}),e(s,{label:"处理中",value:"PROCESSING"}),e(s,{label:"已完成",value:"COMPLETED"}),e(s,{label:"已拒绝",value:"REJECTED"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"计划完成时间",prop:"planTime"},{default:i(()=>[e(k,{modelValue:t.planTime,"onUpdate:modelValue":l[3]||(l[3]=r=>t.planTime=r),type:"date",placeholder:"选择日期","value-format":"YYYY-MM-DDTHH:mm:ss"},null,8,["modelValue"])]),_:1}),e(n,{label:"需求背景",prop:"background"},{default:i(()=>[e(p,{type:"textarea",rows:4,modelValue:t.background,"onUpdate:modelValue":l[4]||(l[4]=r=>t.background=r),placeholder:"请输入需求背景信息"},null,8,["modelValue"])]),_:1}),e(n,{label:"详细描述",prop:"description"},{default:i(()=>[e(p,{type:"textarea",rows:6,modelValue:t.description,"onUpdate:modelValue":l[5]||(l[5]=r=>t.description=r),placeholder:"请输入详细的需求描述"},null,8,["modelValue"])]),_:1}),e(n,{label:"附件"},{default:i(()=>[e(E,{action:"#","auto-upload":!1,disabled:""},{default:i(()=>[e(m,{type:"primary",plain:"",disabled:""},{default:i(()=>l[6]||(l[6]=[O("i",{class:"fas fa-upload mr-1"},null,-1),f(" 上传附件 (未实现)")])),_:1})]),_:1})]),_:1}),e(n,null,{default:i(()=>[e(m,{type:"primary",onClick:V,loading:c.loading},{default:i(()=>l[7]||(l[7]=[f("提交")])),_:1},8,["loading"]),e(m,{onClick:T},{default:i(()=>l[8]||(l[8]=[f("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{F as _};
